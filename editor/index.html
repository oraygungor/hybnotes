<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HybNotes Live Studio (v2 - Image Support)</title>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">

    <style>
        body { background-color: #020617; color: #e2e8f0; font-family: 'Inter', sans-serif; overflow: hidden; }
        
        /* ORTAK STÄ°LLER */
        .rich-text-content, .ql-editor { font-family: 'Inter', sans-serif !important; line-height: 1.8 !important; font-size: 16px !important; color: #cbd5e1 !important; }
        .rich-text-content h1, .ql-editor h1 { font-size: 2em !important; font-weight: 800 !important; color: #fff !important; margin: 1em 0 0.5em !important; line-height: 1.2 !important; }
        .rich-text-content h2, .ql-editor h2 { font-size: 1.5em !important; font-weight: 700 !important; color: #e2e8f0 !important; margin: 1.5em 0 0.5em !important; border-bottom: 1px solid #334155 !important; padding-bottom: 5px !important; }
        .rich-text-content h3, .ql-editor h3 { font-size: 1.25em !important; font-weight: 600 !important; color: #94a3b8 !important; margin: 1.5em 0 0.5em !important; }
        .rich-text-content p, .ql-editor p { margin-bottom: 1em !important; }
        .rich-text-content ul, .ql-editor ul { list-style-type: disc !important; padding-left: 1.5rem !important; margin-bottom: 1rem !important; }
        .rich-text-content ol, .ql-editor ol { list-style-type: decimal !important; padding-left: 1.5rem !important; margin-bottom: 1rem !important; }
        
        .rich-text-content blockquote, .ql-editor blockquote {
            border-left: 4px solid #f59e0b !important;
            background: rgba(245, 158, 11, 0.1) !important;
            padding: 1rem 1.5rem !important;
            margin: 1.5rem 0 !important;
            border-radius: 0 8px 8px 0 !important;
            color: #fbbf24 !important;
            font-style: italic !important;
        }

        .rich-text-content .math-box, .ql-editor .math-box {
            display: block !important;
            margin: 1.5rem 0 !important;
            padding: 1.5rem !important;
            background: rgba(6, 182, 212, 0.1) !important;
            border-left: 4px solid #06b6d4 !important;
            border-radius: 0 8px 8px 0 !important;
            color: #22d3ee !important;
            font-family: 'JetBrains Mono', monospace !important;
            text-align: center !important;
            font-weight: 600 !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2) !important;
        }

        /* --- YENÄ° GÃ–RSEL STÄ°LÄ° --- */
        .custom-responsive-img {
            display: block !important;
            margin: 2rem auto !important; /* Ortala ve boÅŸluk bÄ±rak */
            border-radius: 8px !important;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5) !important;
            transition: transform 0.2s;
            max-width: 100% !important;
        }
        .custom-responsive-img:hover {
            transform: scale(1.01);
            border: 1px solid #22d3ee;
        }

        /* QUILL */
        .ql-toolbar.ql-snow { background: #1e293b; border-color: #334155 !important; border-radius: 12px 12px 0 0; padding: 12px; }
        .ql-container.ql-snow { background: #0f172a; border-color: #334155 !important; border-radius: 0 0 12px 12px; color: #cbd5e1; font-family: 'Inter', sans-serif; font-size: 16px; height: 100%; }
        .ql-editor.ql-blank::before { color: #475569 !important; font-style: italic !important; font-family: 'Inter', sans-serif !important; }
        
        .ql-snow .ql-stroke { stroke: #94a3b8 !important; }
        .ql-snow .ql-fill { fill: #94a3b8 !important; }
        .ql-snow .ql-picker { color: #94a3b8 !important; }
        .ql-snow .ql-active .ql-stroke { stroke: #22d3ee !important; }
        .ql-snow .ql-active .ql-fill { fill: #22d3ee !important; }

        .ql-mathbox { font-weight: bold; color: #22d3ee !important; width: auto !important; padding: 0 5px !important; font-family: 'JetBrains Mono', monospace; display: flex !important; align-items: center; justify-content: center; }
        .ql-mathbox:hover { color: #fff !important; background-color: rgba(6, 182, 212, 0.2) !important; border-radius: 4px; }
        .ql-mathbox::after { content: "[ MB ]"; font-size: 12px; }

        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #020617; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
        
        textarea:focus { outline: none; border-color: #22d3ee; }
        .modal-overlay { background: rgba(0,0,0,0.8); backdrop-filter: blur(4px); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const CATEGORIES = [
            { tr: "Antrenman Bilimi", en: "Training Science" },
            { tr: "Beslenme", en: "Nutrition" },
            { tr: "Fizyoloji", en: "Physiology" },
            { tr: "Sistem KÄ±lavuzu", en: "System Guide" }
        ];

        const App = () => {
            const [data, setData] = useState({
                tr: { title: "Ã–rnek BaÅŸlÄ±k TR", summary: "TÃ¼rkÃ§e Ã¶zet...", content: `<p>Ä°Ã§erik...</p><div class="math-box">$$ E = mc^2 $$</div>` },
                en: { title: "Example Title EN", summary: "English summary...", content: `<p>Content...</p><div class="math-box">$$ E = mc^2 $$</div>` }
            });

            const [editLang, setEditLang] = useState('tr');
            const [viewLang, setViewLang] = useState('tr');
            const [categoryIndex, setCategoryIndex] = useState(0);
            const [references, setReferences] = useState([]);
            const [refInput, setRefInput] = useState("");
            const [readTime, setReadTime] = useState(5);
            const [jsonOutput, setJsonOutput] = useState("");
            
            const jsonFocusRef = useRef(false);
            const isUpdatingQuill = useRef(false);
            
            const editLangRef = useRef(editLang);
            useEffect(() => { editLangRef.current = editLang; }, [editLang]);

            // GitHub ModalÄ±
            const [showGhModal, setShowGhModal] = useState(false);
            const [ghConfig, setGhConfig] = useState({
                token: localStorage.getItem('gh_token') || '',
                owner: localStorage.getItem('gh_owner') || '',
                repo: localStorage.getItem('gh_repo') || '',
                path: localStorage.getItem('gh_path') || 'js/Data.js'
            });
            const [ghStatus, setGhStatus] = useState({ type: '', msg: '' });

            const quillRef = useRef(null);
            const previewRef = useRef(null);

            // --- 1. QUILL KURULUM & Ã–ZEL BLOTLAR ---
            useEffect(() => {
                window.katex = katex;

                if (!quillRef.current) {
                    const container = document.getElementById('editor-container');
                    
                    // --- Custom Math Blot ---
                    const Block = Quill.import('blots/block');
                    class MathBox extends Block {}
                    MathBox.blotName = 'math-box';
                    MathBox.tagName = 'div';
                    MathBox.className = 'math-box';
                    Quill.register(MathBox);

                    // --- Custom Responsive Image Blot (YENÄ°) ---
                    const BlockEmbed = Quill.import('blots/block/embed');
                    class ResponsiveImg extends BlockEmbed {
                        static create(value) {
                            let node = super.create();
                            // value bir obje olabilir { url, width } veya sadece url string
                            const url = typeof value === 'object' ? value.url : value;
                            const width = (typeof value === 'object' && value.width) ? value.width : '100%';

                            node.setAttribute('src', url);
                            node.setAttribute('style', `width: ${width};`); // CSS class zaten ortalÄ±yor
                            return node;
                        }

                        static value(node) {
                            return {
                                url: node.getAttribute('src'),
                                width: node.style.width
                            };
                        }
                    }
                    ResponsiveImg.blotName = 'responsive-img';
                    ResponsiveImg.tagName = 'img';
                    ResponsiveImg.className = 'custom-responsive-img'; // CSS class ile stil veriyoruz
                    Quill.register(ResponsiveImg);


                    // --- Handlers ---
                    const addMathBoxHandler = function() {
                        const range = this.quill.getSelection(true) || { index: this.quill.getLength() };
                        const html = `<div class="math-box">$$ x = ... $$</div><p><br></p>`;
                        this.quill.clipboard.dangerouslyPasteHTML(range.index, html);
                    };

                    const addResponsiveImgHandler = function() {
                        const range = this.quill.getSelection(true) || { index: this.quill.getLength() };
                        
                        // 1. URL Ä°ste
                        const url = prompt("GÃ¶rsel BaÄŸlantÄ±sÄ±nÄ± (URL) yapÄ±ÅŸtÄ±rÄ±n:");
                        if (!url) return;

                        // 2. GeniÅŸlik Ä°ste
                        let width = prompt("GÃ¶rsel GeniÅŸliÄŸi (Ã–rn: 50%, 300px). BoÅŸ bÄ±rakÄ±lÄ±rsa %100 olur:", "100%");
                        if (!width) width = "100%";

                        // 3. Ekle
                        this.quill.insertEmbed(range.index, 'responsive-img', { url, width });
                        this.quill.setSelection(range.index + 1);
                    };

                    const quill = new Quill(container, {
                        theme: 'snow',
                        modules: {
                            toolbar: {
                                container: [
                                    [{ 'header': [2, 3, false] }],
                                    ['bold', 'italic', 'underline', 'strike'],
                                    ['blockquote', 'code-block', 'mathbox', 'responsive-img'], // 'responsive-img' buraya eklendi
                                    [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                                    [{ 'script': 'sub'}, { 'script': 'super' }],
                                    [{ 'color': [] }, { 'background': [] }],
                                    ['link', 'formula', 'clean']
                                ],
                                handlers: { 
                                    'mathbox': addMathBoxHandler,
                                    'responsive-img': addResponsiveImgHandler
                                }
                            }
                        },
                        placeholder: 'Ä°Ã§erik yazmaya baÅŸla...'
                    });

                    // Ã–zel ikon ekle (SVG Camera Icon)
                    const toolbar = quill.getModule('toolbar');
                    if(toolbar) {
                        const btn = document.querySelector('.ql-responsive-img');
                        if(btn) btn.innerHTML = '<svg viewBox="0 0 18 18" width="18" height="18"><path class="ql-stroke" d="M15,12V6a3,3,0,0,0-3-3H6A3,3,0,0,0,3,6v6a3,3,0,0,0,3,3h6A3,3,0,0,0,15,12Z"></path><circle class="ql-fill" cx="9" cy="9" r="2"></circle><rect class="ql-fill" height="1" width="1" x="11.5" y="4.5"></rect></svg>';
                    }

                    quillRef.current = quill;

                    quill.on('text-change', () => {
                        if (isUpdatingQuill.current) return;

                        const html = quill.root.innerHTML;
                        const text = quill.getText();
                        const trimmedText = text.trim();
                        const wordCount = trimmedText ? trimmedText.split(/\s+/).length : 0;
                        setReadTime(Math.max(1, Math.ceil(wordCount / 180)));

                        setData(prev => ({
                            ...prev,
                            [editLangRef.current]: { ...prev[editLangRef.current], content: html }
                        }));
                    });
                }
            }, []); 

            // --- 2. SENKRONÄ°ZASYON ---
            useEffect(() => {
                if (quillRef.current && !isUpdatingQuill.current) {
                    const currentContent = quillRef.current.root.innerHTML;
                    const newContent = data[editLang].content;
                    
                    if (currentContent !== newContent) {
                        isUpdatingQuill.current = true;
                        const selection = quillRef.current.getSelection();
                        const delta = quillRef.current.clipboard.convert(newContent);
                        quillRef.current.setContents(delta, 'silent');
                        if (selection) {
                            try { quillRef.current.setSelection(selection); } catch(e) {}
                        }
                        isUpdatingQuill.current = false;
                    }
                }
            }, [editLang, data]);

            // --- 3. JSON OLUÅžTURMA ---
            useEffect(() => {
                if (!jsonFocusRef.current) {
                    const dataObj = {
                        id: Date.now(), 
                        date: new Date().toISOString().split('T')[0],
                        readTime: { tr: `${readTime} dk`, en: `${readTime} min` },
                        category: CATEGORIES[categoryIndex],
                        title: { tr: data.tr.title, en: data.en.title },
                        summary: { tr: data.tr.summary, en: data.en.summary },
                        content: { tr: data.tr.content, en: data.en.content },
                        references: references
                    };

                    setJsonOutput(JSON.stringify([dataObj], null, 2));
                }
            }, [data, categoryIndex, references, readTime]);

            // --- 4. GITHUB API ---
            const saveToGitHub = async () => {
                const { token, owner, repo, path } = ghConfig;
                if (!token || !owner || !repo || !path) {
                    alert("LÃ¼tfen GitHub ayarlarÄ±nÄ± eksiksiz girin.");
                    setShowGhModal(true);
                    return;
                }
                setGhStatus({ type: 'loading', msg: 'GitHub\'a baÄŸlanÄ±lÄ±yor...' });
                try {
                    const getRes = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`, {
                        headers: { 
                            'Authorization': `Bearer ${token}`, 
                            'Accept': 'application/vnd.github.v3+json' 
                        }
                    });
                    if (!getRes.ok) throw new Error("Dosya bulunamadÄ±.");
                    const fileData = await getRes.json();
                    
                    const content = decodeURIComponent(escape(window.atob(fileData.content)));
                    
                    const postsRegex = /(posts\s*:\s*\[)/;
                    const match = content.match(postsRegex);
                    
                    if (!match) throw new Error("Dosya formatÄ± hatalÄ± ('posts: [' bulunamadÄ±).");
                    
                    const postsStart = match.index + match[0].length;
                    
                    const afterPostsStart = content.slice(postsStart);
                    const needsComma = !/^\s*\]/.test(afterPostsStart); 

                    const newArticleJson = jsonOutput.trim().substring(1, jsonOutput.trim().length - 1);
                    
                    const insertContent = "\n" + newArticleJson + (needsComma ? "," : "");
                    const newFileContent = content.slice(0, postsStart) + insertContent + afterPostsStart;
                    
                    const newContentBase64 = window.btoa(unescape(encodeURIComponent(newFileContent)));

                    const putRes = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`, {
                        method: 'PUT',
                        headers: { 
                            'Authorization': `Bearer ${token}`, 
                            'Content-Type': 'application/json' 
                        },
                        body: JSON.stringify({ message: `Add new article: ${data.tr.title}`, content: newContentBase64, sha: fileData.sha })
                    });
                    if (!putRes.ok) throw new Error("Dosya gÃ¼ncellenemedi.");
                    setGhStatus({ type: 'success', msg: 'BaÅŸarÄ±yla Kaydedildi! ðŸŽ‰' });
                    setTimeout(() => setGhStatus({ type: '', msg: '' }), 3000);
                } catch (err) {
                    setGhStatus({ type: 'error', msg: 'Hata: ' + err.message });
                }
            };

            const saveGhConfig = () => {
                localStorage.setItem('gh_token', ghConfig.token);
                localStorage.setItem('gh_owner', ghConfig.owner);
                localStorage.setItem('gh_repo', ghConfig.repo);
                localStorage.setItem('gh_path', ghConfig.path);
                setShowGhModal(false);
            };

            // --- YARDIMCILAR ---
            const handleJsonChange = (e) => {
                const newVal = e.target.value;
                setJsonOutput(newVal); 
                try {
                    const parsed = JSON.parse(newVal);
                    const item = Array.isArray(parsed) ? parsed[0] : parsed;
                    if (item) {
                        if (item.category?.tr) {
                            const idx = CATEGORIES.findIndex(c => c.tr === item.category.tr);
                            if (idx !== -1) setCategoryIndex(idx);
                        }
                        if (item.references) setReferences(item.references);
                        
                        const newTrContent = item.content?.tr || "";
                        const newEnContent = item.content?.en || "";
                        
                        setData({
                            tr: { title: item.title?.tr || "", summary: item.summary?.tr || "", content: newTrContent },
                            en: { title: item.title?.en || "", summary: item.summary?.en || "", content: newEnContent }
                        });
                    }
                } catch (err) {}
            };

            const handleTitleChange = (e) => setData(prev => ({...prev, [editLang]: { ...prev[editLang], title: e.target.value } }));
            const handleSummaryChange = (e) => setData(prev => ({...prev, [editLang]: { ...prev[editLang], summary: e.target.value } }));
            
            const addReference = () => {
                if (refInput.trim()) {
                    setReferences([...references, refInput.trim()]);
                    setRefInput("");
                }
            };

            const copyJson = () => {
                navigator.clipboard.writeText(jsonOutput);
                alert("JSON KopyalandÄ±!");
            };

            // --- 5. Ã–NÄ°ZLEME RENDER ---
            useEffect(() => {
                if (previewRef.current && window.renderMathInElement) {
                    const timeoutId = setTimeout(() => {
                        try {
                            window.renderMathInElement(previewRef.current, {
                                delimiters: [
                                    {left: '$$', right: '$$', display: true},
                                    {left: '$', right: '$', display: false}
                                ],
                                throwOnError: false
                            });
                        } catch (e) {}
                    }, 100);
                    return () => clearTimeout(timeoutId);
                }
            }, [data, viewLang]);

            return (
                <div className="flex h-screen w-full">
                    {/* SOL PANEL (EditÃ¶r) */}
                    <div className="w-1/2 h-full flex flex-col border-r border-slate-800 bg-slate-900/50 p-6 overflow-y-auto custom-scrollbar">
                        <header className="mb-4 flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                <div className="w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-lg flex items-center justify-center font-black text-slate-900">HN</div>
                                <div>
                                    <h1 className="text-sm font-bold text-white">Editor Studio</h1>
                                    <div className="text-[10px] text-slate-500 font-mono">EDÄ°T MODU: <span className="text-cyan-400 font-bold uppercase">{editLang}</span></div>
                                </div>
                            </div>
                            <div className="flex gap-2">
                                <button onClick={() => setShowGhModal(true)} className="px-3 py-1.5 rounded-md text-xs font-bold bg-slate-800 text-slate-300 hover:text-white border border-slate-700 transition-colors flex items-center gap-2">
                                    <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                                    Ayarlar
                                </button>
                                <div className="bg-slate-800 p-1 rounded-lg border border-slate-700 flex">
                                    <button onClick={() => setEditLang('tr')} className={`px-3 py-1 rounded text-xs font-bold ${editLang === 'tr' ? 'bg-cyan-500 text-slate-900' : 'text-slate-400'}`}>TR</button>
                                    <button onClick={() => setEditLang('en')} className={`px-3 py-1 rounded text-xs font-bold ${editLang === 'en' ? 'bg-cyan-500 text-slate-900' : 'text-slate-400'}`}>EN</button>
                                </div>
                            </div>
                        </header>

                        <div className="space-y-4 mb-4">
                            <input type="text" value={data[editLang].title} onChange={handleTitleChange} className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:border-cyan-500 outline-none font-bold text-lg" placeholder="BaÅŸlÄ±k" />
                            <textarea value={data[editLang].summary} onChange={handleSummaryChange} className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-sm text-slate-300 focus:border-cyan-500 outline-none resize-none h-20" placeholder="Ã–zet" />
                            <div className="grid grid-cols-2 gap-4">
                                <select value={categoryIndex} onChange={e => setCategoryIndex(Number(e.target.value))} className="bg-slate-800 border border-slate-700 rounded-xl px-3 py-2 text-sm text-white outline-none">
                                    {CATEGORIES.map((c, i) => <option key={i} value={i}>{c.tr}</option>)}
                                </select>
                                <div className="bg-slate-800 border border-slate-700 rounded-xl px-3 py-2 text-sm text-center text-cyan-400 font-mono font-bold">{readTime} dk</div>
                            </div>
                        </div>

                        <div className="flex-grow flex flex-col min-h-[400px] h-full">
                            <div id="editor-container" className="flex-grow rounded-b-xl h-full"></div>
                        </div>

                        <div className="mt-6 pt-6 border-t border-slate-800">
                            <div className="flex gap-2 mb-2">
                                <input type="text" value={refInput} onChange={e => setRefInput(e.target.value)} onKeyDown={e => e.key === 'Enter' && addReference()} className="flex-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-xs text-white outline-none" placeholder="Kaynak ekle..." />
                                <button onClick={addReference} className="bg-slate-700 px-4 rounded-lg text-xs font-bold hover:bg-slate-600">EKLE</button>
                            </div>
                            <div className="flex flex-wrap gap-2">
                                {references.map((ref, i) => (
                                    <span key={i} className="text-[10px] bg-slate-800 text-slate-400 px-2 py-1 rounded border border-slate-700 cursor-pointer hover:text-red-400" onClick={() => {const n = [...references]; n.splice(i,1); setReferences(n);}}>{ref} Ã—</span>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* SAÄž PANEL */}
                    <div className="w-1/2 h-full flex flex-col bg-[#0f172a]">
                        <div className="h-[60%] border-b border-slate-800 p-8 overflow-y-auto custom-scrollbar relative bg-slate-900/30">
                            <div className="absolute top-4 right-4 flex items-center gap-3 z-10">
                                <div className="bg-black/50 text-slate-500 text-[10px] font-bold px-2 py-1 rounded uppercase">Ã–nizleme</div>
                                <div className="flex bg-slate-800 p-0.5 rounded-lg border border-slate-700/50">
                                    <button onClick={() => setViewLang('tr')} className={`px-2 py-1 rounded-md text-[10px] font-bold transition-all ${viewLang === 'tr' ? 'bg-cyan-500 text-slate-900' : 'text-slate-400 hover:text-white'}`}>TR</button>
                                    <button onClick={() => setViewLang('en')} className={`px-2 py-1 rounded-md text-[10px] font-bold transition-all ${viewLang === 'en' ? 'bg-cyan-500 text-slate-900' : 'text-slate-400 hover:text-white'}`}>EN</button>
                                </div>
                            </div>
                            <div ref={previewRef} className="rich-text-content max-w-2xl mx-auto mt-4">
                                <div className="flex gap-2 text-[10px] font-bold uppercase text-slate-500 mb-4 font-mono tracking-wider">
                                    <span className="text-cyan-500">{CATEGORIES[categoryIndex].tr}</span>
                                    <span>â€¢</span>
                                    <span>{new Date().toISOString().split('T')[0]}</span>
                                    <span>â€¢</span>
                                    <span>{viewLang.toUpperCase()}</span>
                                </div>
                                <h1>{data[viewLang].title || "BaÅŸlÄ±k Yok"}</h1>
                                <p className="text-sm italic text-slate-400 border-l-2 border-slate-700 pl-3 mb-6">{data[viewLang].summary}</p>
                                <div dangerouslySetInnerHTML={{ __html: data[viewLang].content }} />
                                {references.length > 0 && (
                                    <div className="mt-8 pt-6 border-t border-slate-800/50">
                                        <h5 className="text-[10px] font-black text-slate-500 uppercase mb-2">Referanslar</h5>
                                        <ul className="text-xs text-slate-500 space-y-1">
                                            {references.map((r, i) => <li key={i}>{r}</li>)}
                                        </ul>
                                    </div>
                                )}
                            </div>
                        </div>
                        <div className="h-[40%] bg-[#0b1120] p-4 flex flex-col">
                            <div className="flex justify-between items-center mb-2">
                                <div className="flex items-center gap-2">
                                    <h3 className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">CanlÄ± JSON (DÃ¼zenlenebilir)</h3>
                                    {ghStatus.msg && (
                                        <span className={`text-[10px] font-bold px-2 py-0.5 rounded ${ghStatus.type === 'error' ? 'bg-red-500/20 text-red-400' : 'bg-green-500/20 text-green-400'}`}>
                                            {ghStatus.msg}
                                        </span>
                                    )}
                                </div>
                                <div className="flex gap-2">
                                    <button onClick={saveToGitHub} className="text-[10px] bg-green-600 hover:bg-green-500 text-white font-bold px-3 py-1.5 rounded transition-all flex items-center gap-1">
                                        {ghStatus.type === 'loading' ? 'Kaydediliyor...' : 'GitHub\'a Kaydet'}
                                    </button>
                                    <button onClick={copyJson} className="text-[10px] font-bold text-cyan-400 hover:text-white uppercase transition-colors px-2">Kopyala</button>
                                </div>
                            </div>
                            <div className="flex-grow overflow-hidden rounded-xl border border-slate-800 bg-[#020617] relative">
                                <textarea
                                    value={jsonOutput}
                                    onChange={handleJsonChange}
                                    onFocus={() => jsonFocusRef.current = true}
                                    onBlur={() => jsonFocusRef.current = false}
                                    spellCheck="false"
                                    className="w-full h-full p-4 bg-transparent text-[11px] font-mono text-emerald-400 leading-relaxed resize-none focus:bg-[#0f172a] transition-colors"
                                ></textarea>
                            </div>
                        </div>
                    </div>

                    {/* MODAL */}
                    {showGhModal && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 modal-overlay">
                            <div className="bg-slate-900 w-full max-w-md rounded-2xl border border-slate-700 shadow-2xl overflow-hidden">
                                <div className="p-6 space-y-4">
                                    <h3 className="text-lg font-bold text-white mb-4">GitHub BaÄŸlantÄ± AyarlarÄ±</h3>
                                    
                                    <div>
                                        <label className="text-[10px] font-bold text-slate-500 uppercase block mb-1">Personal Access Token (Repo Read/Write)</label>
                                        <input type="password" value={ghConfig.token} onChange={e => setGhConfig({...ghConfig, token: e.target.value})} className="w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-xs text-white focus:border-cyan-500 outline-none" placeholder="ghp_..." />
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="text-[10px] font-bold text-slate-500 uppercase block mb-1">KullanÄ±cÄ± AdÄ±</label>
                                            <input type="text" value={ghConfig.owner} onChange={e => setGhConfig({...ghConfig, owner: e.target.value})} className="w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-xs text-white focus:border-cyan-500 outline-none" placeholder="Orn: alivelib" />
                                        </div>
                                        <div>
                                            <label className="text-[10px] font-bold text-slate-500 uppercase block mb-1">Repo AdÄ±</label>
                                            <input type="text" value={ghConfig.repo} onChange={e => setGhConfig({...ghConfig, repo: e.target.value})} className="w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-xs text-white focus:border-cyan-500 outline-none" placeholder="Orn: hybnotes" />
                                        </div>
                                    </div>
                                    <div>
                                        <label className="text-[10px] font-bold text-slate-500 uppercase block mb-1">Dosya Yolu</label>
                                        <input type="text" value={ghConfig.path} onChange={e => setGhConfig({...ghConfig, path: e.target.value})} className="w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-xs text-white focus:border-cyan-500 outline-none" placeholder="js/Data.js" />
                                    </div>
                                </div>
                                <div className="bg-slate-800 p-4 flex gap-3">
                                    <button onClick={() => setShowGhModal(false)} className="flex-1 text-xs font-bold text-slate-400 hover:text-white py-2">Ä°ptal</button>
                                    <button onClick={saveGhConfig} className="flex-1 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold py-2 rounded-lg">Kaydet</button>
                                </div>
                            </div>
                        </div>
                    )}

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
